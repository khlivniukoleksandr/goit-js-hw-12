{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '52958686-1557e7ea2156d90b306934aa7';\nexport const PER_PAGE = 15;\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\naxios.defaults.params = {\n  key: API_KEY,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: PER_PAGE,\n};\n\nexport let page = 1;\n\nexport const getImagesByQuery = async (query, page = 1) => {\n  const response = await axios.get('', {\n    params: {\n      q: query,\n      page: page,\n    },\n  });\n  return response.data;\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst listImg = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadButton = document.querySelector('.load-more-button');\n\nloader.classList.add('hidden');\nconst createMarkup = ({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) => {\n  return `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img \n                    class=\"gallery-image\"\n                    src=\"${webformatURL}\" \n                    alt=\"${tags}\" \n                    width=\"360\"\n                    height=\"200\"\n                />\n            </a>\n            <div class=\"info flex\">\n                <p class=\"info-item\"><strong>Likes</strong> ${likes}</p>\n                <p class=\"info-item\"><strong>Views</strong> ${views}</p>\n                <p class=\"info-item\"><strong>Comments</strong> ${comments}</p>\n                <p class=\"info-item\"><strong>Downloads</strong> ${downloads}</p>\n            </div>\n        </li>\n    `;\n};\n\nexport const clearGallery = () => {\n  if (listImg) {\n    listImg.innerHTML = '';\n  }\n};\n\nexport const createGallery = images => {\n  if (!listImg) {\n    return;\n  }\n  const markup = images.map(createMarkup).join('');\n  listImg.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n};\n\nexport const showLoader = () => {\n  loader.classList.remove('hidden');\n};\n\nexport const hideLoader = () => {\n  loader.classList.add('hidden');\n};\n\nexport const showButtonLoad = () => {\n  loadButton.classList.remove('hidden');\n};\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery, PER_PAGE } from './js/pixabay-api';\nimport {\n  clearGallery,\n  createGallery,\n  hideLoader,\n  showButtonLoad,\n  showLoader,\n} from './js/render-functions';\n\nconst searchForm = document.querySelector('.form');\nconst loadButton = document.querySelector('.load-more-button');\n\nlet page = 1;\nlet currentQuery = '';\n\n//\nconst fetchImages = (query, page) => {\n  showLoader();\n  getImagesByQuery(query, page)\n    .then(data => {\n      console.log(data);\n      if (data.hits.length === 0) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n        return;\n      }\n      createGallery(data.hits);\n\n      const firstCard = document.querySelector('.gallery-item');\n      if (firstCard) {\n        const cardHeight = firstCard.getBoundingClientRect().height;\n        window.scrollBy({\n          top: cardHeight * 3,\n          behavior: 'smooth',\n        });\n      }\n\n      const totalPages = Math.ceil(data.totalHits / PER_PAGE);\n      if (page >= totalPages) {\n        loadButton.classList.add('hidden');\n        iziToast.error({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n        });\n      } else {\n        showButtonLoad();\n      }\n    })\n    .catch(error => {\n      console.error('Request failed:', error);\n      iziToast.error({\n        message:\n          'Failed to fetch images. Please check your network connection.',\n        position: 'topRight',\n      });\n    })\n    .finally(() => {\n      hideLoader();\n    });\n};\n\n//\nsearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n  const query = event.target.elements['search-text'].value.trim();\n\n  if (query === '') {\n    iziToast.error({\n      message: 'Search field cannot be empty!',\n      position: 'topRight',\n    });\n    return;\n  }\n  currentQuery = query;\n  page = 1;\n\n  clearGallery();\n  fetchImages(currentQuery, page);\n  event.target.reset();\n});\n\n//\nloadButton.addEventListener('click', () => {\n  page += 1;\n  fetchImages(currentQuery, page);\n});\n"],"names":["API_KEY","PER_PAGE","axios","getImagesByQuery","query","page","listImg","loader","loadButton","createMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","createGallery","images","markup","gallery","showLoader","hideLoader","showButtonLoad","SimpleLightbox","searchForm","currentQuery","fetchImages","data","iziToast","firstCard","cardHeight","totalPages","error","event"],"mappings":"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"}